---
import { useState, useEffect } from "react";

// State for current theme
const [theme, setTheme] = Astro.useState("light");

// Load saved theme on mount
useEffect(() => {
  if (localStorage.theme === "dark" ||
      (!("theme" in localStorage) && window.matchMedia("(prefers-color-scheme: dark)").matches)
  ) {
    document.documentElement.classList.add("dark");
    setTheme("dark");
  } else {
    document.documentElement.classList.remove("dark");
    setTheme("light");
  }
}, []);

// Toggle theme handler
function toggleTheme() {
  if (theme === "light") {
    document.documentElement.classList.add("dark");
    localStorage.theme = "dark";
    setTheme("dark");
  } else {
    document.documentElement.classList.remove("dark");
    localStorage.theme = "light";
    setTheme("light");
  }
}
---

<button 
  class="p-2 rounded border hover:bg-gray-200 dark:hover:bg-gray-700 transition"
  onclick={toggleTheme}
  aria-label="Toggle Theme"
>
  {theme === "light" ? "üåô" : "‚òÄÔ∏è"}
</button>
